{"ast":null,"code":"import { db } from '../firebase';\nimport { ref, set, onValue, get } from 'firebase/database';\nconst TIMER_REF = 'timer';\nconst DEFAULT_STATE = {\n  isRunning: false,\n  endTime: null,\n  remainingTime: 24 * 60 * 60 * 1000\n};\n\n// Write timer state to Firebase\nexport function saveTimerState(state) {\n  return set(ref(db, TIMER_REF), state);\n}\n\n// One-time read of timer state\nexport async function getTimerState() {\n  const snapshot = await get(ref(db, TIMER_REF));\n  return snapshot.exists() ? snapshot.val() : {\n    ...DEFAULT_STATE\n  };\n}\n\n// Real-time listener — calls callback whenever timer state changes in Firebase\nexport function subscribeToTimer(callback) {\n  const timerRef = ref(db, TIMER_REF);\n  const unsubscribe = onValue(timerRef, snapshot => {\n    const state = snapshot.exists() ? snapshot.val() : {\n      ...DEFAULT_STATE\n    };\n    callback(state);\n  });\n  return unsubscribe;\n}","map":{"version":3,"names":["db","ref","set","onValue","get","TIMER_REF","DEFAULT_STATE","isRunning","endTime","remainingTime","saveTimerState","state","getTimerState","snapshot","exists","val","subscribeToTimer","callback","timerRef","unsubscribe"],"sources":["J:/Github/SITNovate-2.0-Countdown_Timer/src/utils/timerStorage.js"],"sourcesContent":["import { db } from '../firebase';\r\nimport { ref, set, onValue, get } from 'firebase/database';\r\n\r\nconst TIMER_REF = 'timer';\r\n\r\nconst DEFAULT_STATE = {\r\n  isRunning: false,\r\n  endTime: null,\r\n  remainingTime: 24 * 60 * 60 * 1000\r\n};\r\n\r\n// Write timer state to Firebase\r\nexport function saveTimerState(state) {\r\n  return set(ref(db, TIMER_REF), state);\r\n}\r\n\r\n// One-time read of timer state\r\nexport async function getTimerState() {\r\n  const snapshot = await get(ref(db, TIMER_REF));\r\n  return snapshot.exists() ? snapshot.val() : { ...DEFAULT_STATE };\r\n}\r\n\r\n// Real-time listener — calls callback whenever timer state changes in Firebase\r\nexport function subscribeToTimer(callback) {\r\n  const timerRef = ref(db, TIMER_REF);\r\n  const unsubscribe = onValue(timerRef, (snapshot) => {\r\n    const state = snapshot.exists() ? snapshot.val() : { ...DEFAULT_STATE };\r\n    callback(state);\r\n  });\r\n  return unsubscribe;\r\n}\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,aAAa;AAChC,SAASC,GAAG,EAAEC,GAAG,EAAEC,OAAO,EAAEC,GAAG,QAAQ,mBAAmB;AAE1D,MAAMC,SAAS,GAAG,OAAO;AAEzB,MAAMC,aAAa,GAAG;EACpBC,SAAS,EAAE,KAAK;EAChBC,OAAO,EAAE,IAAI;EACbC,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AAChC,CAAC;;AAED;AACA,OAAO,SAASC,cAAcA,CAACC,KAAK,EAAE;EACpC,OAAOT,GAAG,CAACD,GAAG,CAACD,EAAE,EAAEK,SAAS,CAAC,EAAEM,KAAK,CAAC;AACvC;;AAEA;AACA,OAAO,eAAeC,aAAaA,CAAA,EAAG;EACpC,MAAMC,QAAQ,GAAG,MAAMT,GAAG,CAACH,GAAG,CAACD,EAAE,EAAEK,SAAS,CAAC,CAAC;EAC9C,OAAOQ,QAAQ,CAACC,MAAM,CAAC,CAAC,GAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,GAAG;IAAE,GAAGT;EAAc,CAAC;AAClE;;AAEA;AACA,OAAO,SAASU,gBAAgBA,CAACC,QAAQ,EAAE;EACzC,MAAMC,QAAQ,GAAGjB,GAAG,CAACD,EAAE,EAAEK,SAAS,CAAC;EACnC,MAAMc,WAAW,GAAGhB,OAAO,CAACe,QAAQ,EAAGL,QAAQ,IAAK;IAClD,MAAMF,KAAK,GAAGE,QAAQ,CAACC,MAAM,CAAC,CAAC,GAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,GAAG;MAAE,GAAGT;IAAc,CAAC;IACvEW,QAAQ,CAACN,KAAK,CAAC;EACjB,CAAC,CAAC;EACF,OAAOQ,WAAW;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}