{"ast":null,"code":"import { db } from '../firebase';\nimport { ref, set, onValue, get } from 'firebase/database';\nconst TIMER_REF = 'timer';\nconst DEFAULT_STATE = {\n  isRunning: false,\n  endTime: null,\n  remainingTime: 24 * 60 * 60 * 1000\n};\n\n// Write timer state to Firebase\nexport function saveTimerState(state) {\n  return set(ref(db, TIMER_REF), state);\n}\n\n// One-time read of timer state\nexport async function getTimerState() {\n  const snapshot = await get(ref(db, TIMER_REF));\n  return snapshot.exists() ? snapshot.val() : {\n    ...DEFAULT_STATE\n  };\n}\n\n// Real-time listener — calls callback whenever timer state changes in Firebase\nexport function subscribeToTimer(callback) {\n  const timerRef = ref(db, TIMER_REF);\n  const unsubscribe = onValue(timerRef, snapshot => {\n    const state = snapshot.exists() ? snapshot.val() : {\n      ...DEFAULT_STATE\n    };\n    callback(state);\n  });\n  return unsubscribe;\n}\n\n// GitHub Push Timer\nconst GITHUB_TIMER_REF = 'githubPushTimer';\nconst THREE_HOURS = 3 * 60 * 60 * 1000;\n\n// Save GitHub timer end time to Firebase\nexport function saveGitHubTimer(endTime) {\n  return set(ref(db, GITHUB_TIMER_REF), {\n    endTime\n  });\n}\n\n// Get GitHub timer end time\nexport async function getGitHubTimer() {\n  const snapshot = await get(ref(db, GITHUB_TIMER_REF));\n  if (snapshot.exists()) {\n    return snapshot.val().endTime;\n  }\n  // Initialize with 3 hours from now if not exists\n  const newEndTime = Date.now() + THREE_HOURS;\n  await saveGitHubTimer(newEndTime);\n  return newEndTime;\n}\n\n// Real-time listener for GitHub timer\nexport function subscribeToGitHubTimer(callback) {\n  const timerRef = ref(db, GITHUB_TIMER_REF);\n  const unsubscribe = onValue(timerRef, async snapshot => {\n    let endTime;\n    if (snapshot.exists()) {\n      endTime = snapshot.val().endTime;\n    } else {\n      endTime = Date.now() + THREE_HOURS;\n      await saveGitHubTimer(endTime);\n    }\n    callback(endTime);\n  });\n  return unsubscribe;\n}\n\n// Reset GitHub timer (add 3 hours from now)\nexport async function resetGitHubTimer() {\n  const newEndTime = Date.now() + THREE_HOURS;\n  await saveGitHubTimer(newEndTime);\n  return newEndTime;\n}","map":{"version":3,"names":["db","ref","set","onValue","get","TIMER_REF","DEFAULT_STATE","isRunning","endTime","remainingTime","saveTimerState","state","getTimerState","snapshot","exists","val","subscribeToTimer","callback","timerRef","unsubscribe","GITHUB_TIMER_REF","THREE_HOURS","saveGitHubTimer","getGitHubTimer","newEndTime","Date","now","subscribeToGitHubTimer","resetGitHubTimer"],"sources":["J:/Github/SITNovate-2.0-Countdown_Timer/src/utils/timerStorage.js"],"sourcesContent":["import { db } from '../firebase';\r\nimport { ref, set, onValue, get } from 'firebase/database';\r\n\r\nconst TIMER_REF = 'timer';\r\n\r\nconst DEFAULT_STATE = {\r\n  isRunning: false,\r\n  endTime: null,\r\n  remainingTime: 24 * 60 * 60 * 1000\r\n};\r\n\r\n// Write timer state to Firebase\r\nexport function saveTimerState(state) {\r\n  return set(ref(db, TIMER_REF), state);\r\n}\r\n\r\n// One-time read of timer state\r\nexport async function getTimerState() {\r\n  const snapshot = await get(ref(db, TIMER_REF));\r\n  return snapshot.exists() ? snapshot.val() : { ...DEFAULT_STATE };\r\n}\r\n\r\n// Real-time listener — calls callback whenever timer state changes in Firebase\r\nexport function subscribeToTimer(callback) {\r\n  const timerRef = ref(db, TIMER_REF);\r\n  const unsubscribe = onValue(timerRef, (snapshot) => {\r\n    const state = snapshot.exists() ? snapshot.val() : { ...DEFAULT_STATE };\r\n    callback(state);\r\n  });\r\n  return unsubscribe;\r\n}\r\n\r\n// GitHub Push Timer\r\nconst GITHUB_TIMER_REF = 'githubPushTimer';\r\nconst THREE_HOURS = 3 * 60 * 60 * 1000;\r\n\r\n// Save GitHub timer end time to Firebase\r\nexport function saveGitHubTimer(endTime) {\r\n  return set(ref(db, GITHUB_TIMER_REF), { endTime });\r\n}\r\n\r\n// Get GitHub timer end time\r\nexport async function getGitHubTimer() {\r\n  const snapshot = await get(ref(db, GITHUB_TIMER_REF));\r\n  if (snapshot.exists()) {\r\n    return snapshot.val().endTime;\r\n  }\r\n  // Initialize with 3 hours from now if not exists\r\n  const newEndTime = Date.now() + THREE_HOURS;\r\n  await saveGitHubTimer(newEndTime);\r\n  return newEndTime;\r\n}\r\n\r\n// Real-time listener for GitHub timer\r\nexport function subscribeToGitHubTimer(callback) {\r\n  const timerRef = ref(db, GITHUB_TIMER_REF);\r\n  const unsubscribe = onValue(timerRef, async (snapshot) => {\r\n    let endTime;\r\n    if (snapshot.exists()) {\r\n      endTime = snapshot.val().endTime;\r\n    } else {\r\n      endTime = Date.now() + THREE_HOURS;\r\n      await saveGitHubTimer(endTime);\r\n    }\r\n    callback(endTime);\r\n  });\r\n  return unsubscribe;\r\n}\r\n\r\n// Reset GitHub timer (add 3 hours from now)\r\nexport async function resetGitHubTimer() {\r\n  const newEndTime = Date.now() + THREE_HOURS;\r\n  await saveGitHubTimer(newEndTime);\r\n  return newEndTime;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}