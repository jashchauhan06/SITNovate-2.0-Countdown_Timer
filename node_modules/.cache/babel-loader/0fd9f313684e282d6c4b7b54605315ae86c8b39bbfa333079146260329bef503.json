{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import FlipCard from'./FlipCard';import{subscribeToTimer}from'../utils/timerStorage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CountdownTimer(){const[time,setTime]=useState({hours:'00',minutes:'00',seconds:'00'});const[status,setStatus]=useState({text:'Paused',bg:'transparent',color:'#555'});const timerStateRef=useRef(null);const animFrameRef=useRef(null);const computeDisplay=useCallback(()=>{const state=timerStateRef.current;if(!state)return;let timeLeft=state.remainingTime||0;if(state.isRunning&&state.endTime){timeLeft=Math.max(0,state.endTime-Date.now());}const totalSeconds=Math.floor(timeLeft/1000);const hours=Math.floor(totalSeconds/3600);const minutes=Math.floor(totalSeconds%3600/60);const seconds=totalSeconds%60;setTime({hours:String(hours).padStart(2,'0'),minutes:String(minutes).padStart(2,'0'),seconds:String(seconds).padStart(2,'0')});if(timeLeft<=0){setStatus({text:\"Time's Up!\",bg:'rgba(239, 68, 68, 0.1)',color:'#ef4444'});}else if(state.isRunning){setStatus({text:'Running',bg:'rgba(34, 197, 94, 0.1)',color:'#22c55e'});}else if(timeLeft>=24*60*60*1000-1000){setStatus({text:'Ready',bg:'transparent',color:'#555'});}else{setStatus({text:'Paused',bg:'rgba(245, 158, 11, 0.1)',color:'#f59e0b'});}if(state.isRunning&&timeLeft>0){animFrameRef.current=requestAnimationFrame(computeDisplay);}},[]);useEffect(()=>{// Subscribe to Firebase — fires whenever admin changes the timer\nconst unsubscribe=subscribeToTimer(state=>{timerStateRef.current=state;// Cancel any existing animation loop\nif(animFrameRef.current){cancelAnimationFrame(animFrameRef.current);}// Compute display immediately, then start animation loop if running\ncomputeDisplay();});return()=>{unsubscribe();if(animFrameRef.current){cancelAnimationFrame(animFrameRef.current);}};},[computeDisplay]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"SITNOVATE 2.0 \",/*#__PURE__*/_jsx(\"br\",{}),\" 24 Hour Hackathon\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"countdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-unit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"digits\",children:[/*#__PURE__*/_jsx(FlipCard,{value:time.hours[0]}),/*#__PURE__*/_jsx(FlipCard,{value:time.hours[1]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Hours\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"time-separator\",children:\":\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-unit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"digits\",children:[/*#__PURE__*/_jsx(FlipCard,{value:time.minutes[0]}),/*#__PURE__*/_jsx(FlipCard,{value:time.minutes[1]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Minutes\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"time-separator\",children:\":\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-unit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"digits\",children:[/*#__PURE__*/_jsx(FlipCard,{value:time.seconds[0]}),/*#__PURE__*/_jsx(FlipCard,{value:time.seconds[1]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Seconds\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"status\",style:{background:status.bg,color:status.color},children:status.text})]});}export default CountdownTimer;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","FlipCard","subscribeToTimer","jsx","_jsx","jsxs","_jsxs","CountdownTimer","time","setTime","hours","minutes","seconds","status","setStatus","text","bg","color","timerStateRef","animFrameRef","computeDisplay","state","current","timeLeft","remainingTime","isRunning","endTime","Math","max","Date","now","totalSeconds","floor","String","padStart","requestAnimationFrame","unsubscribe","cancelAnimationFrame","className","children","value","style","background"],"sources":["J:/SITNovate - Timer/src/components/CountdownTimer.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport FlipCard from './FlipCard';\r\nimport { subscribeToTimer } from '../utils/timerStorage';\r\n\r\nfunction CountdownTimer() {\r\n  const [time, setTime] = useState({ hours: '00', minutes: '00', seconds: '00' });\r\n  const [status, setStatus] = useState({ text: 'Paused', bg: 'transparent', color: '#555' });\r\n  const timerStateRef = useRef(null);\r\n  const animFrameRef = useRef(null);\r\n\r\n  const computeDisplay = useCallback(() => {\r\n    const state = timerStateRef.current;\r\n    if (!state) return;\r\n\r\n    let timeLeft = state.remainingTime || 0;\r\n\r\n    if (state.isRunning && state.endTime) {\r\n      timeLeft = Math.max(0, state.endTime - Date.now());\r\n    }\r\n\r\n    const totalSeconds = Math.floor(timeLeft / 1000);\r\n    const hours = Math.floor(totalSeconds / 3600);\r\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n    const seconds = totalSeconds % 60;\r\n\r\n    setTime({\r\n      hours: String(hours).padStart(2, '0'),\r\n      minutes: String(minutes).padStart(2, '0'),\r\n      seconds: String(seconds).padStart(2, '0')\r\n    });\r\n\r\n    if (timeLeft <= 0) {\r\n      setStatus({ text: \"Time's Up!\", bg: 'rgba(239, 68, 68, 0.1)', color: '#ef4444' });\r\n    } else if (state.isRunning) {\r\n      setStatus({ text: 'Running', bg: 'rgba(34, 197, 94, 0.1)', color: '#22c55e' });\r\n    } else if (timeLeft >= 24 * 60 * 60 * 1000 - 1000) {\r\n      setStatus({ text: 'Ready', bg: 'transparent', color: '#555' });\r\n    } else {\r\n      setStatus({ text: 'Paused', bg: 'rgba(245, 158, 11, 0.1)', color: '#f59e0b' });\r\n    }\r\n\r\n    if (state.isRunning && timeLeft > 0) {\r\n      animFrameRef.current = requestAnimationFrame(computeDisplay);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Subscribe to Firebase — fires whenever admin changes the timer\r\n    const unsubscribe = subscribeToTimer((state) => {\r\n      timerStateRef.current = state;\r\n\r\n      // Cancel any existing animation loop\r\n      if (animFrameRef.current) {\r\n        cancelAnimationFrame(animFrameRef.current);\r\n      }\r\n\r\n      // Compute display immediately, then start animation loop if running\r\n      computeDisplay();\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      if (animFrameRef.current) {\r\n        cancelAnimationFrame(animFrameRef.current);\r\n      }\r\n    };\r\n  }, [computeDisplay]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>SITNOVATE 2.0 <br /> 24 Hour Hackathon</h1>\r\n      <div className=\"countdown\">\r\n        <div className=\"time-unit\">\r\n          <div className=\"digits\">\r\n            <FlipCard value={time.hours[0]} />\r\n            <FlipCard value={time.hours[1]} />\r\n          </div>\r\n          <span className=\"label\">Hours</span>\r\n        </div>\r\n        <span className=\"time-separator\">:</span>\r\n        <div className=\"time-unit\">\r\n          <div className=\"digits\">\r\n            <FlipCard value={time.minutes[0]} />\r\n            <FlipCard value={time.minutes[1]} />\r\n          </div>\r\n          <span className=\"label\">Minutes</span>\r\n        </div>\r\n        <span className=\"time-separator\">:</span>\r\n        <div className=\"time-unit\">\r\n          <div className=\"digits\">\r\n            <FlipCard value={time.seconds[0]} />\r\n            <FlipCard value={time.seconds[1]} />\r\n          </div>\r\n          <span className=\"label\">Seconds</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"status\" style={{ background: status.bg, color: status.color }}>\r\n        {status.text}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CountdownTimer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}